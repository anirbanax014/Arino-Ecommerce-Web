<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - ShopEase</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-shopping-bag"></i>
                <a href="index.html" style="text-decoration: none; color: inherit;">ShopEase</a>
            </div>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search for products, brands and more..." id="searchInput">
            </div>
            <div class="header-actions">
                <a href="login.html" class="auth-link">
                    <i class="fas fa-user"></i>
                    <span id="authText">Login</span>
                </a>
                <a href="cart.html" class="cart-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cart</span>
                    <span class="cart-count" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </header>
    <!-- Cart Section -->
    <section class="cart-section">
        <div class="container">
            <h1>Your Shopping Cart</h1>
            <div class="cart-container">
                <div class="cart-items" id="cartItems">
                    <!-- Cart items will be dynamically loaded here -->
                </div>
                <div class="cart-summary">
                    <h2>Order Summary</h2>
                    <div class="summary-item">
                        <span>Subtotal</span>
                        <span id="subtotal">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span>Shipping</span>
                        <span id="shipping">$0.00</span>
                    </div>
                    <div class="summary-item">
                        <span>Tax</span>
                        <span id="tax">$0.00</span>
                    </div>
                    <div class="summary-total">
                        <span>Total</span>
                        <span id="total">$0.00</span>
                    </div>
                    <button class="btn-primary btn-block" onclick="window.location.href='checkout.html'">Proceed to Checkout</button>
                    <button class="btn-secondary btn-block" onclick="window.location.href='index.html'">Continue Shopping</button>
                </div>
            </div>
        </div>
    </section>
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>ShopEase</h3>
                <p>Your one-stop destination for all shopping needs</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Press</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Customer Service</h3>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Track Order</a></li>
                    <li><a href="#">Returns</a></li>
                    <li><a href="#">FAQs</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Policies</h3>
                <ul>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                    <li><a href="#">Shipping Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 ShopEase. All rights reserved.</p>
        </div>
    </footer>
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="toastMessage">Cart updated!</span>
        </div>
    </div>
    <script src="../js/products.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        // Function to render cart items
        function renderCartItems() {
            const cartItems = document.getElementById('cartItems');
            if (!cartItems) return;
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <h2>Your cart is empty</h2>
                        <p>Browse our categories and discover our best deals!</p>
                        <button class="btn-primary" onclick="window.location.href='index.html'">Start Shopping</button>
                    </div>
                `;
                return;
            }
            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item" data-id="${item.id}">
                    <div class="item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        <div class="item-price">
                            <span class="current-price">$${item.price.toFixed(2)}</span>
                            <span class="original-price">$${item.originalPrice.toFixed(2)}</span>
                            <span class="discount">${item.discount}% off</span>
                        </div>
                    </div>
                    <div class="item-quantity">
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                    </div>
                    <div class="item-total">
                        $${(item.price * item.quantity).toFixed(2)}
                    </div>
                    <button class="remove-item" onclick="removeItem(${item.id})">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');
            updateCartSummary();
        }
        // Function to update cart summary
        function updateCartSummary() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shipping = subtotal > 0 ? 5.99 : 0;
            const tax = subtotal * 0.08; // 8% tax
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('shipping').textContent = `$${shipping.toFixed(2)}`;
            document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('total').textContent = `$${(subtotal + shipping + tax).toFixed(2)}`;
        }
        // Function to update item quantity
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (!item) return;
            item.quantity += change;
            if (item.quantity <= 0) {
                removeItem(productId);
            } else {
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCartItems();
                updateCartCount();
            }
        }
        // Function to remove item from cart
        function removeItem(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCartItems();
            updateCartCount();
            showToast('Item removed from cart!');
        }
        // Initialize cart page
        document.addEventListener('DOMContentLoaded', function() {
            renderCartItems();
        });
    </script>
</body>
</html>